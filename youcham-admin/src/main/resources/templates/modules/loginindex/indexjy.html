<!DOCTYPE html>
<!-- saved from url=(0045)http://118.89.17.229:8080/inspect/suggest.jsp -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>意见建议</title> 
	<#include "/header.html">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link href="${request.contextPath}/statics/css/login/global.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="${request.contextPath}/statics/plugins/webuploader/css/webuploader.css" />
		
	<script type="text/javascript" src="${request.contextPath}/statics/plugins/webuploader/js/webuploader.js"></script>

	<link rel="stylesheet" type="text/css" href="${request.contextPath}/statics/plugins/webuploader/css/demo.css">
	
	   <link rel="stylesheet" href="${request.contextPath}/statics/css/AdminLTE.min.css">
  	<link rel="stylesheet" href="${request.contextPath}/statics/css/all-skins.min.css">
  			<script type="text/javascript" src="${request.contextPath}/statics/plugins/jqPaginator-1.2.1/jqPaginator.js"></script>
	<style>
		#uploader .placeholder{
			background-image: none;
			min-height:220px;
		}
		
		#uploader .queueList{
		    margin: 0px 75px;
		}
		.ui-jqgrid .ui-jqgrid-pager .ui-paging-info, .ui-jqgrid .ui-jqgrid-toppager .ui-paging-info
		{
		margin-left: -10px;
		}
	</style>
</head>

<body>
	<header class="navbar navbar-default" role="navigation">
		<nav id="nav-top">
			<div class="index_header">
				<div class="navbar-header">
					<div class="container">
						<button class="navbar-toggle collapsed" data-toggle="collapse"
							data-target=".navbar-collapse" type="button">
							<span class="sr-only">导航条</span> <span class="icon-bar"></span> <span
								class="icon-bar"></span> <span class="icon-bar"></span>
						</button>
						<a class="navbar-brand"
							href="http://118.89.17.229:8080/inspect/suggest.jsp#" title="#"><img
							alt="Logo"
							src="${request.contextPath}/statics/css/login/logo.png"></a>
						<div class="fr head-tel">
							<!-- <img src="images/top-r.png" /> -->
						</div>
					</div>
				</div>
				<div id="navbar" class="navbar-collapse collapse">
					<div class="container">
						<div class="row">
							<ul class="nav navbar-nav">
								 <li><a onclick="clickurl('index','index')" target="_blank">首页</a></li>                                
                                   <li><a href="javaScript:void(0)" onclick="clickurl('1000001778346481','组织机构')">组织机构</a></li>  
                                   <li><a href="javaScript:void(0)" onclick="clickurl('1000000316154733','党纪法规')"> 党纪法规</a></li>   
                                   <li><a href="javaScript:void(0)" onclick="clickurl('1000002030644410','警钟长鸣')">警钟长鸣</a></li>   
                                   <li><a href="javaScript:void(0)" onclick="clickurl('1000001585344164','工作动态')">工作动态</a></li>   
                                   <li><a href="javaScript:void(0)" onclick="clickurl('1000001861542884','学习园地')">学习园地</a></li>
                                   <li id="indexLi"><a href="${request.contextPath}/modules/loginindex/indexjy.html">意见建议</a></li> 
							</ul>
						</div>
					</div>
				</div>
			</div>
		</nav>
	</header>
	<div class="bread">
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-sm-12 col-md-12">
					<div class="map">
						位置：<a onclick="clickurl('index','index')" target="_blank">网站首页</a>
						&gt; <a href="#">意见建议</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<main role="main" class="main-content mt10"> <!--  <div v-show="showList">
        <div class="grid-btn">
			<#if shiro.hasPermission("ins:inssuggestions:save")>
            <a class="btn btn-primary" @click="add"><i class="fa fa-plus"></i>&nbsp;新增</a>
			</#if>
			<#if shiro.hasPermission("ins:inssuggestions:update")>
            <a class="btn btn-primary" @click="update"><i class="fa fa-pencil-square-o"></i>&nbsp;修改</a>
			</#if>
			<#if shiro.hasPermission("ins:inssuggestions:delete")>
            <a class="btn btn-danger" @click="del"><i class="fa fa-trash-o"></i>&nbsp;删除</a>
			</#if>
        </div>
        <table id="jqGrid"></table>
        <div id="jqGridPager"></div>
    </div> -->

	<div id="rrapp">
		<div class="pindao wrap1 jieshao">
			<div class="container">
				<div class="row">
					<div class="col-md-12 sects lwrap">
						<div class="fl w100 rwrap pl5 nopl">
							<div class="wrap bord news-item">
								<div class="title">
									<h5>意见建议</h5>
								</div>
								<div class="maillist">


									<div v-show="showList" class=""  style="float: left" >
										<form class="form-horizontal" style="width: 650px;">
											<div class="form-group">
												<div class="col-sm-2 control-label"><span class="red-info">*</span> 姓名</div>
												<div class="col-sm-10">
													<input type="text" class="form-control"
														v-model="insSuggestions.userName" placeholder="姓名" />
												</div>
											</div>
											<div class="form-group">
												<div class="col-sm-2 control-label"><span class="red-info">*</span> 电话</div>
												<div class="col-sm-10">
													<input type="text" class="form-control"
														v-model="insSuggestions.userPhone" placeholder="电话" />
												</div>
											</div>
											<div class="form-group">
												<div class="col-sm-2 control-label"><span class="red-info">*</span> 建议标题</div>
												<div class="col-sm-10">
													<input type="text" class="form-control"
														v-model="insSuggestions.sugTitle" placeholder="建议标题" />
												</div>
											</div>
											<div class="form-group">
												<div class="col-sm-2 control-label"><span class="red-info">*</span> 建议内容</div>
												<div class="col-sm-10">
<!-- 													<input type="text" class="form-control" -->
<!-- 														v-model="insSuggestions.sugContent" placeholder="建议内容" /> -->
													<textarea class="form-control" v-model="insSuggestions.sugContent" rows="" cols="" style="height: 80px" placeholder="建议内容" ></textarea>	
												</div>
											</div>
											<div class="form-group hidden">
												<div class="col-sm-2 control-label">附件</div>
												<div class="col-sm-10">
													<input id="fujian" type="text" class="form-control"
														v-model="insSuggestions.sugEnclosure" placeholder="附件" />
												</div>
											</div>
											<div class="form-group">
												<div class="col-sm-2 control-label">附件</div>
												<div class="page-container" style="margin-left: 90px">

													<div id="uploader" class="wu-example">
														<div class="queueList">
															<div id="picker" class="placeholder">
																<div id="filePicker" class="webuploader-container">
																	<div class="webuploader-pick">点击选择文件</div>
																	<div id="rt_rt_1cd40hvg519nd9rtduu3qmp161"
																		style="position: absolute; top: 0px; left: 448px; width: 168px; height: 44px; overflow: hidden; bottom: auto; right: auto;">
																		<input type="file" name="file"
																			class="webuploader-element-invisible"
																			multiple="multiple" accept="image/*"><label
																			style="opacity: 0; width: 100%; height: 100%; display: block; cursor: pointer; background: rgb(255, 255, 255);"></label>
																	</div>
																</div>
																<p>或将文件拖到这里</p>
															</div>
															<ul class="filelist" style="display: none;"></ul>
														</div>
														<div class="statusBar element-invisible" style="">
															<div class="progress" style="display: none;">
																<span class="text">0%</span> <span class="percentage"
																	style="width: 0%;"></span>
															</div>
															<div class="info">共0张（0B），已上传0张</div>
															<div class="btns">
																<div id="filePicker2" class="webuploader-container">
																	<div style="border: 1px white" class="webuploader-pick"></div>
																	<div id="rt_rt_1cd40hvg9cme5m38qi1tn4nl26"
																		style="position: absolute; top: 0px; left: 10px; width: 94px; height: 42px; overflow: hidden; bottom: auto; right: auto;">
																		<input type="file" name="file"
																			class="webuploader-element-invisible"
																			multiple="multiple" accept="image/*">
																			<label
																			style="opacity: 0; width: 100%; height: 100%; display: block; cursor: pointer; background: rgb(255, 255, 255);">
																			</label>
																	</div>
																</div>
																<div class="uploadBtn state-pedding" style="margin-left:430px">开始上传</div>
															</div>
														</div>
													</div>

												</div>
											</div>

											<div class="form-group" style="margin-left: 220px">
												<div class="col-sm-2 control-label"></div>
												<input type="button" class="btn btn-primary"
													@click="saveOrUpdate" value="提交" />
											</div>
											
				<div id="infoq" style="display: none;margin-top: 30px">
					 <div class="form-group" >
				             <div class="col-xs-2 control-label">建议标题</div>
				             <div class="col-xs-10">
				                <input readonly="readonly" id="jybt" class="form-control" name="jybt" rows="3" placeholder="请输入建议标题">
				            </div>
				 	</div>
				 	 <div class="form-group" >
				             <div class="col-xs-2 control-label">建议内容</div>
				             <div class="col-xs-10">
				                <textarea readonly="readonly" id="jynr" class="form-control" name="jynr" rows="3" placeholder="请输入处置意见">
								</textarea>
				            </div>
				 	</div>
					  <div class="form-group" >
				             <div class="col-xs-2 control-label">反馈意见</div>
				             <div class="col-xs-10">
				                <textarea readonly="readonly" id="setq" class="form-control" name="clyj" rows="3" placeholder="请输入处置意见">
								</textarea>
				            </div>
				 	</div>
					</div>
											
										</form>
									</div>
                                    
                     
                  <div style="float: left;width: 503px;margin-top:20px;border: 1px solid #4444449e;height:510px;
                                   border-radius:5px;
                                    border-top: 1px solid #337ab7;">                  
		         					 <div class="news-piclist" style="height: 390px">
		         					 <div class="box-header with-border">
						              <li class="box-title" style="font-weight:bold;color:#3c8dbc;border-bottom:4px solid #3c8dbc;height:30px">审核意见反馈
						              </li>
									<!-- <div class="box-tools pull-right">
						              </div> -->
						            </div>
	                                     <div id="column-list" style="display:hidden">
	                                        
	                                     </div>
	                                    <ul  class="news" id="news-list">
	                                   </ul>
	                                </div>
		           <!-- 分页按钮 -->  
									<div class="footer" style="margin-left:100px;margin-top: 58px">  
									  <ul class="pagination" id="pagination0"></ul>  
									</div>  
		         
									</div>
								</div>
								<div class="paging"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	</main>
	<footer role="contentinfo" class="index-footer">
		<div class="copyright">
			<div class="container f-bg">
				<div class="row">
					2017 © 版权所有：南昌海关<span class="fr">技术支持：言臣科技</span>
				</div>
			</div>
		</div>
	</footer>
	<div id="goto_top" style="display: none;">
		<a href="javascript:void(0);" title="返回顶部" class="goto_top_btn">↑</a>
	</div>
	
	
	<script
		src="${request.contextPath}/statics/js/modules/ins/indexsug.js?_${.now?long}"></script>


	<script type="text/javascript">
    // 添加全局站点信息
    var BASE_URL = '/webuploader';
    </script>

	  <script type="text/javascript">
		function clickurl(getid,getname){
			var url = "informdiscipline.html?columnid="+getid+"&content="+escape(getname)+"";
			window.location.href=url;
			if(getname == "index"){
				var url = baseURL+"login.html";
				window.location.href=url;
			}
			if(getid == "1000001778346481"){
				var url = "informorganization.html";
				window.location.href=url;
			}
		}
		
	</script>


	<script type="text/javascript">
	
	
	jQuery(function() {
	    var $ = jQuery,    // just in case. Make sure it's not an other libaray.

	        $wrap = $('#uploader'),

	        // 图片容器
	        $queue = $('<ul class="filelist"></ul>')
	            .appendTo( $wrap.find('.queueList') ),

	        // 状态栏，包括进度和控制按钮
	        $statusBar = $wrap.find('.statusBar'),

	        // 文件总体选择信息。
	        $info = $statusBar.find('.info'),

	        // 上传按钮
	        $upload = $wrap.find('.uploadBtn'),

	        // 没选择文件之前的内容。
	        $placeHolder = $wrap.find('.placeholder'),

	        // 总体进度条
	        $progress = $statusBar.find('.progress').hide(),

	        // 添加的文件数量
	        fileCount = 0,

	        // 添加的文件总大小
	        fileSize = 0,

	        // 优化retina, 在retina下这个值是2
	        ratio = window.devicePixelRatio || 1,

	        // 缩略图大小
	        thumbnailWidth = 110 * ratio,
	        thumbnailHeight = 110 * ratio,

	        // 可能有pedding, ready, uploading, confirm, done.
	        state = 'pedding',

	        // 所有文件的进度信息，key为file id
	        percentages = {},

	        supportTransition = (function(){
	            var s = document.createElement('p').style,
	                r = 'transition' in s ||
	                      'WebkitTransition' in s ||
	                      'MozTransition' in s ||
	                      'msTransition' in s ||
	                      'OTransition' in s;
	            s = null;
	            return r;
	        })(),

	        // WebUploader实例
	        uploader;

	    if ( !WebUploader.Uploader.support() ) {
	        alert( 'Web Uploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器');
	        throw new Error( 'WebUploader does not support the browser you are using.' );
	    }

	    // 实例化
	    uploader = WebUploader.create({
	        pick: {
	            id: '#filePicker',
	            label: '点击选择文件'
	        },
	        dnd: '#uploader .queueList',
	        paste: document.body,

	        accept: {
	            title: 'Images',
	           // extensions: 'gif,jpg,jpeg,bmp,png,word,html',
	           // mimeTypes: 'image/*'
	        },

	        // swf文件路径
	        swf: BASE_URL + '/js/Uploader.swf',

	        disableGlobalDnd: true,

	        chunked: true,
	        // server: 'http://webuploader.duapp.com/server/fileupload.php',
	        server:youchamapi+'/fileAction/webuploadfile', //在做这个demo的时候，并没有服务器地址，我使用的是HBuilder自带的浏览器打开文件，复制url
	        fileNumLimit: 1,
	        fileSizeLimit: 5 * 1024 * 1024,    // 200 M
	        fileSingleSizeLimit: 1 * 1024 * 1024    // 50 M
	    });

	    // 添加“添加文件”的按钮，
	    /* uploader.addButton({
	        id: '#filePicker2',
	        label: '继续添加'
	    }); */

	    // 当有文件添加进来时执行，负责view的创建
	    function addFile( file ) {
	        var $li = $( '<li id="' + file.id + '">' +
	                '<p class="title">' + file.name + '</p>' +
	                '<p class="imgWrap"></p>'+
	                '<p class="progress"><span></span></p>' +
	                '</li>' ),

	            $btns = $('<div class="file-panel">' +
	                '<span class="cancel">删除</span>' +
	                '<span class="rotateRight">向右旋转</span>' +
	                '<span class="rotateLeft">向左旋转</span></div>').appendTo( $li ),
	            $prgress = $li.find('p.progress span'),
	            $wrap = $li.find( 'p.imgWrap' ),
	            $info = $('<p class="error"></p>'),

	            showError = function( code ) {
	                switch( code ) {
	                    case 'exceed_size':
	                        text = '文件大小超出';
	                        break;

	                    case 'interrupt':
	                        text = '上传暂停';
	                        break;

	                    default:
	                        text = '上传失败，请重试';
	                        break;
	                }

	                $info.text( text ).appendTo( $li );
	            };

	        if ( file.getStatus() === 'invalid' ) {
	            showError( file.statusText );
	        } else {
	            // @todo lazyload
	            $wrap.text( '预览中' );
	            uploader.makeThumb( file, function( error, src ) {
	                if ( error ) {
	                    $wrap.text( '不能预览' );
	                    return;
	                }

	                var img = $('<img src="'+src+'">');
	                $wrap.empty().append( img );
	            }, thumbnailWidth, thumbnailHeight );

	            percentages[ file.id ] = [ file.size, 0 ];
	            file.rotation = 0;
	        }

	        file.on('statuschange', function( cur, prev ) {
	            if ( prev === 'progress' ) {
	                $prgress.hide().width(0);
	            } else if ( prev === 'queued' ) {
	                $li.off( 'mouseenter mouseleave' );
	                $btns.remove();
	            }

	            // 成功
	            if ( cur === 'error' || cur === 'invalid' ) {
	                console.log( file );
	                showError( file.statusText );
	                percentages[ file.id ][ 1 ] = 1;
	            } else if ( cur === 'interrupt' ) {
	                showError( 'interrupt' );
	            } else if ( cur === 'queued' ) {
	                percentages[ file.id ][ 1 ] = 0;
	            } else if ( cur === 'progress' ) {
	                $info.remove();
	                $prgress.css('display', 'block');
	            } else if ( cur === 'complete' ) {
	                $li.append( '<span class="success"></span>' );
	            }

	            $li.removeClass( 'state-' + prev ).addClass( 'state-' + cur );
	        });

	        $li.on( 'mouseenter', function() {
	            $btns.stop().animate({height: 30});
	        });

	        $li.on( 'mouseleave', function() {
	            $btns.stop().animate({height: 0});
	        });

	        $btns.on( 'click', 'span', function() {
	            var index = $(this).index(),
	                deg;

	            switch ( index ) {
	                case 0:
	                    uploader.removeFile( file );
	                    return;

	                case 1:
	                    file.rotation += 90;
	                    break;

	                case 2:
	                    file.rotation -= 90;
	                    break;
	            }

	            if ( supportTransition ) {
	                deg = 'rotate(' + file.rotation + 'deg)';
	                $wrap.css({
	                    '-webkit-transform': deg,
	                    '-mos-transform': deg,
	                    '-o-transform': deg,
	                    'transform': deg
	                });
	            } else {
	                $wrap.css( 'filter', 'progid:DXImageTransform.Microsoft.BasicImage(rotation='+ (~~((file.rotation/90)%4 + 4)%4) +')');
	                // use jquery animate to rotation
	                // $({
	                //     rotation: rotation
	                // }).animate({
	                //     rotation: file.rotation
	                // }, {
	                //     easing: 'linear',
	                //     step: function( now ) {
	                //         now = now * Math.PI / 180;

	                //         var cos = Math.cos( now ),
	                //             sin = Math.sin( now );

	                //         $wrap.css( 'filter', "progid:DXImageTransform.Microsoft.Matrix(M11=" + cos + ",M12=" + (-sin) + ",M21=" + sin + ",M22=" + cos + ",SizingMethod='auto expand')");
	                //     }
	                // });
	            }


	        });

	        $li.appendTo( $queue );
	    }

	    // 负责view的销毁
	    function removeFile( file ) {
	        var $li = $('#'+file.id);

	        delete percentages[ file.id ];
	        updateTotalProgress();
	        $li.off().find('.file-panel').off().end().remove();
	    }

	    function updateTotalProgress() {
	        var loaded = 0,
	            total = 0,
	            spans = $progress.children(),
	            percent;

	        $.each( percentages, function( k, v ) {
	            total += v[ 0 ];
	            loaded += v[ 0 ] * v[ 1 ];
	        } );

	        percent = total ? loaded / total : 0;

	        spans.eq( 0 ).text( Math.round( percent * 100 ) + '%' );
	        spans.eq( 1 ).css( 'width', Math.round( percent * 100 ) + '%' );
	        updateStatus();
	    }

	    function updateStatus() {
	        var text = '', stats;

	        if ( state === 'ready' ) {
	            text = '选中' + fileCount + '张图片，共' +
	                    WebUploader.formatSize( fileSize ) + '。';
	        } else if ( state === 'confirm' ) {
	            stats = uploader.getStats();
	            if ( stats.uploadFailNum ) {
	                text = '已成功上传' + stats.successNum+ '张照片，'+
	                    stats.uploadFailNum + '张照片上传失败'
	            }
	            
	          
	     

	        } else {
	            stats = uploader.getStats();
	            text = '共' + fileCount + '张（' +
	                    WebUploader.formatSize( fileSize )  +
	                    '），已上传' + stats.successNum + '张';
                
	            
	            if ( stats.uploadFailNum ) {
	                text += '，失败' + stats.uploadFailNum + '张';
	            }
	        }

	        $info.html( text );
	    }

	    function setState( val ) {
	        var file, stats;

	        if ( val === state ) {
	            return;
	        }

	        $upload.removeClass( 'state-' + state );
	        $upload.addClass( 'state-' + val );
	        state = val;

	        switch ( state ) {
	            case 'pedding':
	                $placeHolder.removeClass( 'element-invisible' );
	                $queue.parent().removeClass('filled');
	                $queue.hide();
	                $statusBar.addClass( 'element-invisible' );
	                uploader.refresh();
	                break;

	            case 'ready':
	                $placeHolder.addClass( 'element-invisible' );
	                $( '#filePicker2' ).removeClass( 'element-invisible');
	                $queue.parent().addClass('filled');
	                $queue.show();
	                $statusBar.removeClass('element-invisible');
	                uploader.refresh();
	                break;

	            case 'uploading':
	                $( '#filePicker2' ).addClass( 'element-invisible' );
	                $progress.show();
	                $upload.text( '暂停上传' );
	                break;

	            case 'paused':
	                $progress.show();
	               // $upload.text( '继续上传' );
	                break;

	            case 'confirm':
	                $progress.hide();
	                $upload.text( '开始上传' ).addClass( 'disabled' );

	                stats = uploader.getStats();
	                if ( stats.successNum && !stats.uploadFailNum ) {
	                    setState( 'finish' );
	                    return;
	                }
	                break;
	            case 'finish':
	                stats = uploader.getStats();
	                if ( stats.successNum ) {
	                	
	                	
	                	console.log(  uploader);
	                	console.log( stats);
	                    alert( '上传成功' );
	                } else {
	                    // 没有成功的图片，重设
	                    state = 'done';
	                    location.reload();
	                }
	                break;
	        }

	        updateStatus();
	    }

	    uploader.onUploadProgress = function( file, percentage ) {
	        var $li = $('#'+file.id),
	            $percent = $li.find('.progress span');

	        $percent.css( 'width', percentage * 100 + '%' );
	        percentages[ file.id ][ 1 ] = percentage;
	        updateTotalProgress();
	    };

	    uploader.onFileQueued = function( file ) {
	        fileCount++;
	        fileSize += file.size;

	        if ( fileCount === 1 ) {
	            $placeHolder.addClass( 'element-invisible' );
	            $statusBar.show();
	        }

	        addFile( file );
	        setState( 'ready' );
	        updateTotalProgress();
	    };

	    uploader.onFileDequeued = function( file ) {
	        fileCount--;
	        fileSize -= file.size;

	        if ( !fileCount ) {
	            setState( 'pedding' );
	        }

	        removeFile( file );
	        updateTotalProgress();

	    };

	    uploader.on( 'all', function( type ) {
	        var stats;
	        switch( type ) {
	            case 'uploadFinished':
	                setState( 'confirm' );
	                break;

	            case 'startUpload':
	                setState( 'uploading' );
	                break;

	            case 'stopUpload':
	                setState( 'paused' );
	                break;

	            	

	        }
	    });
	    
	    uploader.on( 'uploadSuccess', function( file ,response ) {
	          	alert("附件上传成功");
	        	console.log(response.url);
	            $( '#fujian').val(response.url);
    	  });

	    uploader.onError = function( code ) {
	        alert( 'Eroor: ' + code );
	    };

	    $upload.on('click', function() {
	        if ( $(this).hasClass( 'disabled' ) ) {
	            return false;
	        }

	        if ( state === 'ready' ) {
	            uploader.upload();
	        } else if ( state === 'paused' ) {
	            uploader.upload();
	        } else if ( state === 'uploading' ) {
	            uploader.stop();
	        }
	    });

	    $info.on( 'click', '.retry', function() {
	        uploader.retry();
	    } );

	    $info.on( 'click', '.ignore', function() {
	        alert( 'todo' );
	    } );

	    $upload.addClass( 'state-' + state );
	    updateTotalProgress();
	});

	</script>
	<script type="text/javascript">
	
	 $.get( baseURL + 'ins/inssuggestions/list',{'statu':'1'},function(r){
		 console.log(r);
		 $('#pagination0').jqPaginator({
		        totalPages: r.page.totalPage,
		        visiblePages: 10,
		        currentPage: r.page.currPage,
		        postData:{'statu':'1'},

		        first: '<li class="first"><a href="javascript:void(0);">第一页</a></li>',
		        prev: '<li class="prev"><a href="javascript:void(0);">上一页</a></li>',
		        next: '<li class="next"><a href="javascript:void(0);">下一页</a></li>',
		        last: '<li class="last"><a href="javascript:void(0);">最后一页</a></li>',
		        page: '<li class="page"><a href="javascript:void(0);">{{page}}</a></li>',
		        onPageChange: function (num) {
		           console.log("输出获得页面0----"+num);
		           
		        $.ajax({
		    		url:baseURL + 'ins/inssuggestions/list',
		    		type:"get",
		    		dataType:"json",
		    		data:{limit:10,page:num,'statu':'1'},
		    		timeout:"10000",
		    		success:function(data){
		    			var contents = "";
		    			console.log(data);
		    			var html = "";
		    			if(data.page.list.length>0){
		    				for(var i=0;i<data.page.list.length;i++){
		    					
		    					 html =html+ "<li onclick='infoq(\""+data.page.list[i].sugTitle+"\",\""+data.page.list[i].sugContent+"\",\""+data.page.list[i].shyj+"\")' style='font-size:15px;height:40px;line-height:40px'>"+data.page.list[i].sugTitle+"<span style='float:right'> "+data.page.list[i].createTime.substring(0,10)+"</span></li>";
		    					
		    					
		    				}
		    				console.log(html);
		    				$("#news-list").html(html);
		    			}
		    			//vm.insInform = data.page.list;
		    			//$("#casepubbaseinfo").html(contents);
		    		}
		    	});
		           
		        	
	            $('#text').html('当前第' + num + '页');
		        }
		    }); 
		 
	 });
	 
		 
	function infoq(a,b,q){
		/* alert(q); */
		$("#jybt").val(a);
		$("#jynr").val(b);
		$("#setq").val(q);
		layer.open({
			type : 1,
			offset : '50px',
			skin : 'layui-layer-molv',
			title : "详情",
			area : [ '500px', '400px' ],
			shade : 0.2,
			shadeClose : false,
			content : jQuery("#infoq"),
			btn : [  '关闭' ],
			/* yes: function(index,layero){
				 // vm.updateoption(geta);
				//vm.saveAjax();
				
				
			 }, */
			end:function(layero, index){
				
			}   
			
		});
	}
	
	</script>
	
	<script type="text/javascript">
	
    $("#jqGrid").jqGrid({
        url: baseURL + 'ins/inssuggestions/list',
        datatype: "json",
        postData:{'statu': '1'},
        colModel: [			
			{ label: 'suggestId', name: 'suggestId', index: 'suggest_id', width: 50, key: true,hidden:true },
			{ label: '姓名', name: 'userName', index: 'user_name', width: 80 }, 			
			{ label: '建议标题', name: 'sugTitle', index: 'sug_title', width: 80 }, 			
			{ label: '建议内容', name: 'sugContent', index: 'sug_content', width: 80 }, 			
			{ label: '附件', name: 'sugEnclosure', index: 'sug_enclosure', width: 80, formatter(value,option,row){
				return '<a href="javascript:;" onclick="loadImg(\''+value+'\');">查看</a>';
			}}, 			
        ],
		viewrecords: true,
        height: 385,
        rowNum: 10,
		rowList : [10,30,50],
        rownumbers: true, 
        rownumWidth: 25, 
        autowidth:true,
        pager: "#jqGridPager",
        jsonReader : {
            root: "page.list",
            page: "page.currPage",
            total: "page.totalPage",
            records: "page.totalCount"
        },
        prmNames : {
            page:"page", 
            rows:"limit", 
            order: "order"
        },
        gridComplete:function(){
        	//隐藏grid底部滚动条
        	$("#jqGrid").closest(".ui-jqgrid-bdiv").css({ "overflow-x" : "hidden" }); 
        }
    });
	
	
	
  //加载附件
    function loadImg(src){
	  if(src==""||src==null){
		  alert("暂无附件");
		  return false;
	  }
    	layer.open({
    		type : 2,
    		offset : '50px',
    		maxmin:true,
    		skin : 'layui-layer-molv',
    		title : '查看附件',
    		area : [ '700px', '400px' ],
    		shade : 0.2,
    		shadeClose : false,
    		content : src,
    		btn : [ '关闭']//,
//    		yes: function(index,layero){
//                vm.saveOrUpdate();
//    		}
    	});
    }
	
	</script>

</body>
</html>